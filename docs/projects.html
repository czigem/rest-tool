<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Get Help to the rest-tool.">
    <meta name="author" content="Tamás Benke">
    <meta name="Keywords" content="rest, restful, utility, tools, rest-tool, node.js, api, development" />
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>rest-tool</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="jumbotron-narrow.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">
      <div class="header">
        <ul class="nav nav-pills pull-right">
          <li><a href="../index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="getStarted.html">Get Started</a></li>
          <li><a href="documentation.html">Documentation</a></li>
          <li><a href="http://tombenke.github.io/rest-tool-cookbook/">Examples</a></li>
          <li><a href="getHelp.html">Get Help</a></li>
        </ul>
        <h3 class="text-muted">rest-tool</h3>
      </div>

      <div class="row marketing">
        <div class="col-lg-12">
          <h2 id="create-and-maintain-api-projects">Create and maintain API projects</h2>
<h3 id="create-new-projects">Create new projects</h3>
<p>In order to generate a new REST API project, execute the following command:</p>
<pre><code>$ rest-tool create &lt;project-name&gt;
</code></pre><p>for example:</p>
<pre><code>$ rest-tool create crm-api
</code></pre><p>After, you have created the new project, move into the new projects folder, 
and install those node modules, the new project needs:</p>
<pre><code>$ cd crm-api
$ npm install
</code></pre><p>Now the project is ready to define new services, to run and test them, as well as to generate HTML documentation of them.</p>
<h3 id="the-structure-of-a-project">The structure of a project</h3>
<p>The REST API project layout generated by the <code>rest-tool</code> utility looks like this:</p>
<pre><code>crm-api/
├── docs
├── server
├── services
│   └── monitoring
│       └── isAlive
├── templates
│   ├── docs
│   │   ├── images
│   │   ├── js
│   │   │   └── jquery-1.9.0
│   │   ├── sass
│   │   │   └── partials
│   │   └── stylesheets
│   ├── server
│   ├── services
│   │   ├── COLLECTION
│   │   ├── OPERATION
│   │   └── RESOURCE
│   └── test
└── test
</code></pre><p>In most of the cases the configuration files, service descriptors and even the schema files are written in <a href="http://en.wikipedia.org/wiki/YAML">YAML</a> format. Content-wise YAML fully covers the capabilities of JSON but it is a more human readable format. Also it offers some extra features that JSON can not provide, such as referencing reusable content, which helps to avoid unnecessary copy-paste.</p>
<p>The role of the of the directories and files:</p>
<ul>
<li><p><strong>config.yml</strong> :<br>  It holds the configuration parameters of the REST API project. 
  See below the detailed description of the format of this file.</p>
</li>
<li><p><strong>server</strong> :<br>  This folder contains the mock server with the mock implementation of the API.</p>
</li>
<li><p><strong>services</strong> :<br>  This folder contains the service descriptors. Each service should be put into its own sub-folder, and must have a <code>service.yml</code> file in it. All the other supplementary files, which belongs to the specific service, and used to the specification must be put here, beside the <code>service.yml</code> file. Such files are for example the test-data and schema files.</p>
<p>  The service implementation files, which are referred by the <code>service.yml</code> via the <code>implementation</code> fields should be put beside the server code, and not here.</p>
</li>
<li><p><strong>docs</strong> :<br>  Contains the HTML format documentation of the REST API. This folder will be totally removed, and recreated during updating the documentation, so you should not modify its content manually.</p>
</li>
<li><p><strong>templates</strong> :<br>  This holds the customizable templates used by the documentation generator and the test case generator.</p>
</li>
<li><p><strong>templates/docs</strong> :<br>  Documentation templates, stylesheets, and images that the tool is using to create the HTML format documentation. They are written in <a href="https://github.com/raycmorgan/Mu">Mustache</a> format, using partials.</p>
<p>  The stylesheet is based on <a href="http://sass-lang.com/">sass</a>/<a href="http://compass-style.org/">compass</a>. If you want to change the CSS, modify the files under the <code>templates/docs/sass</code> directory.</p>
</li>
<li><p><strong>templates/test</strong> :<br>  JavaScript test-case (<a href="https://github.com/raycmorgan/Mu">Mustache</a>) templates to generate unit test code, which will run with mocha and supertest. These are referred from the service descriptors by their names. You can put here any number of additional templates.</p>
</li>
<li><p><strong>templates/services</strong> :<br>  Service descriptor templates in YAML format organized by the three main classes of services: COLLECTION, RESOURCE and OPERATION. Each stereotype has its own subdirectory, containing the <code>service.yml</code> template as well as some predefined test data files.</p>
</li>
<li><p><strong>test</strong> :<br>  The test cases generated by the <code>rest-tool</code> utility using the service descriptors, and the referred templates.</p>
</li>
<li><p><strong>Makefile</strong> :<br>  Makefile to run the test cases. Used by <a href="http://visionmedia.github.io/mocha/">mocha</a> and <a href="http://jenkins-ci.org/">Jenkins</a>.</p>
</li>
</ul>
<p>In general, you can modify the content of the files and folders the <code>rest-tool create</code> command made, except the files in <code>docs</code> and the <code>test</code> folders, because these will be created and later overwritten by the <code>rest-tool</code> command. If you want to modify the working of the test-cases, the server api implementation or the look-and-feel of the generated documents, you should mostly make changes under the <code>templates</code> and <code>server</code> directories, and of course you will create the service descriptions under the <code>services</code> folder.</p>
<h3 id="the-config-yml-file">The <code>config.yml</code> file</h3>
<p>This is the default <code>config.yml</code> file created for a new API project:</p>
<pre><code>projectName: the-name-of-the-new-project
apiVersion: v0.0.0
author: TBD.
licence: TBD.
serviceUrlPrefix: /rest
servicePort: 3007
baseUrl: http://localhost:3007/rest
servicesRoot: services
services:
    - /monitoring/isAlive
    # To add new services, put here the path of the directory
    # that contains the service.yml

loginCredentials:
    user: username
    pass: password
</code></pre><p>The <code>config.yml</code> file contains the generic parameters for the services, such as:</p>
<ul>
<li><p><strong>projectName:</strong>
<em>(mandatory, string)</em><br>The name of he API project</p>
</li>
<li><p><strong>apiVersion:</strong>
<em>(mandatory, string)</em><br>The actual version number of the API project</p>
</li>
<li><p><strong>author:</strong>
<em>(mandatory, string)</em><br>The author(s) of the API project</p>
</li>
<li><p><strong>licence:</strong>
<em>(mandatory, string)</em><br>Defines the type of the licence for the API</p>
</li>
<li><p><strong>serviceUrlPrefix:</strong>
<em>(mandatory, string)</em><br>The URL prefix commonly used by all the services</p>
</li>
<li><p><strong>servicePort:</strong>
<em>(mandatory, string)</em><br>  description: |
<em>(mandatory, integer)</em><br>The port where the mock server will provide the services and the test agents connects to it.</p>
</li>
<li><p><strong>baseUrl:</strong>
<em>(mandatory, string)</em><br>The base url of the services</p>
</li>
<li><p><strong>servicesRoot:</strong>
<em>(mandatory, string)</em><br>The path to the folder that is the base for the service descriptor sub-folders</p>
</li>
<li><p><strong>services:</strong>
<em>(mandatory, array)</em><br>A list of usb-folders under &#39;services&#39; that which contain the active services. The list items are relative paths to the service descriptor under the services folder.</p>
</li>
<li><p><strong>loginCredentials:</strong>
<em>(mandatory, object)</em><br>Defines the security credentials for testing.  </p>
<ul>
<li><p><strong>user:</strong>
<em>(mandatory, string)</em><br>The username used for authentication to the mock server</p>
</li>
<li><p><strong>pass:</strong>
<em>(mandatory, string)</em><br>The password used for authentication to the mock server</p>
</li>
</ul>
</li>
</ul>
<p>When the server is started, or the generator is used, they check the validity of the config file, so you might get error messages in case of wrong format or missing properties.</p>
<p>To see the detailed schema specification of the <code>config.yml</code> see the <a href="https://github.com/tombenke/rest-tool-common/blob/master/schemas/serviceConfigSchema.yml">serviceConfigSchema.yml</a> file, defined in the <code>rest-tool-common</code> module.</p>
<p>These properties are all available during the documentation and test case generation process in the templates. It is also possible to place additional properties beside the mandatory ones, and they also can be used in templates, so you can customize your documentation or test cases using your own extensional data.</p>
<h3 id="upgrade-an-existing-api-project">Upgrade an existing API project</h3>
<p>The content of the generated projects might change with the new versions of the <code>rest-tool</code>.</p>
<p>A given project is generated to refer to a specific <code>rest-tool-common</code> module, which ensures that the project will work even the rest-tool is significantly changing, however it only guarantees that the server, and the previously generated test cases will work.</p>
<p>In case you are upgrading to a new <code>rest-tool</code> version, the document generation and test case generation may not work any more with an older project. If you would like to leverage the new features, you have to upgrade your old project to the new version.</p>
<p>In order to do this, you can upgrade the old project manually or via the <code>rest-tool upgrade</code> command.</p>
<p>The manual steps are the following:</p>
<ol>
<li>Install the newest version of the <code>rest-tool</code>.</li>
<li>Generate a new, empty project with the new version.</li>
<li>Replace the version of <code>rest-tool-common</code> in the old project&#39;s <code>package.json</code> with the new value found in the newly generated project&#39;s <code>package.json</code>.</li>
<li>Merge the new module dependencies might found in the new version of <code>package.json</code> to the old <code>projects&#39; package.json</code>.</li>
<li>Copy/merge the templates folder from the new project to the old project.</li>
<li>Copy/merge the server folder from the new project to the old project.</li>
<li>Merge the config.yml file from the new project to the config.yml file of the old project.</li>
<li>Regenerate the docs and test cases.</li>
</ol>
<p>In case, you are using the <code>rest-tool upgrade</code> command, you have to execute it in the project root folder. The steps are mainly similar to the manual process, but you can skip the steps: 2-3. The tool will make a copy of the current files and directories into a subdirectory named <code>orig</code>. Then overwrites the files that changed since the last upgrade. The services folder will not change, so there is no copy made on it.</p>
<p>After executing the command, you should execute the merging of changes (steps: 4-8).
You can remove the <code>orig</code> folder, when everything is successfully merged, and running.</p>

        </div>
      </div>

      <div class="footer">
        <p class="copyright">rest-tool is maintained by <a href="https://github.com/tombenke">tombenke</a><br>
        Theme borrowed from <a href="http://getbootstrap.com/examples/jumbotron-narrow/">Bootstrap</a></p>
      </div>

    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  </body>
</html>